workflowname: idbac_analysis_workflow
workflowdescription: IDBac-Analysis
workflowlongdescription: Welcome to the IDBac-Analysis workflow! This workflow processes protein and small molecule MALDI mass spectrometry data for use with IDBac-Analysis, an interactive platform for bacterial identification and metabolite profiling. You can read more about this workflow in the documentation https://wang-bioinformatics-lab.github.io/GNPS2_Documentation/idbac-brukerstart-here/
workflowversion: "2025.09.27.00"
workflowfile: nf_workflow.nf
workflowautohide: false
adminonly: false
#This maps the parameters from an input form to those that will appear in nextflow
parameterlist:
    - displayname: File Selection
      paramtype: section

    - displayname: Input .mzML Files for Protein MALDI Spectra
      paramtype: fileselector
      nf_paramname: input_spectra_folder
      formplaceholder: Input .mzML files for protein MALDI spectra
      formvalue: ""
      targettaskfolder: input_spectra
      optional: false
      selectsinglefile: false
      folderunroll: true

    - displayname: Input .mzML Files for Small Molecule MALDI Spectra
      paramtype: fileselector
      nf_paramname: input_small_molecule_folder
      formplaceholder: Input .mzML files for small molecule MALDI spectra
      formvalue: ""
      targettaskfolder: input_small_molecule_folder
      optional: false
      selectsinglefile: false
      folderunroll: true

    - displayname: Input .mzML Files for Small Molecule Media Control (Optional)
      paramtype: fileselector
      nf_paramname: input_media_control_folder
      formplaceholder: Input .mzML files for small molecule media control
      formvalue: ""
      targettaskfolder: input_media_control
      optional: true
      selectsinglefile: false
      folderunroll: true
      tooltip: "Upload a folder containing media control files for small molecule data. File names must match those in the metadata file."

    - displayname: Input .csv Metadata File (Optional)
      paramtype: fileselector
      nf_paramname: input_metadata_file
      formplaceholder: Input .csv metadata file
      formvalue: ""
      targettaskfolder: input_metadata_file
      optional: true
      selectsinglefile: true
      folderunroll: true

    - displayname: Parameters
      paramtype: section

    - displayname: Distance Metric
      paramtype: select
      nf_paramname: distance
      formvalue: "cosine"
      options:
        - value: "presence"
          display: "Presence"
        - value: "cosine"
          display: "Cosine"
        - value: "euclidean"
          display: "Euclidean"

    - displayname: Similarity Calculation Bin Size (Da)
      paramtype: select
      nf_paramname: search_bin_size
      formvalue: '10'
      options:
        - value: '1'
          display: "1 Da"
        - value: '5'
          display: "5 Da"
        - value: '10'
          display: "10 Da"

    - displayname: Protein Database Search Mass Range Lower Bound
      paramtype: text
      nf_paramname: database_search_mass_range_lower
      formplaceholder: Enter the Database Search Mass Range
      formvalue: "3000"
      tooltip: "The lower bound of m/z values when comparing protein spectra to the database."

    - displayname: Protein Database Search Mass Range Upper Bound
      paramtype: text
      nf_paramname: database_search_mass_range_upper
      formplaceholder: Enter the Database Search Mass Range
      formvalue: "20000"
      tooltip: "The upper bound of m/z values when comparing protein spectra to the database."

    - displayname: Protein Database Search Distance Threshold
      paramtype: text
      nf_paramname: database_search_threshold
      formplaceholder: Enter the Database Search Distance Threshold
      formvalue: "0.5"
      tooltip: "The maximumum distance threshold for a protein to be considered a match to the database."

    - displayname: Seed Genera
      paramtype: select # select_checkbox # <-- should be used when a dropdown is implemented
      selecttype: multi
      nf_paramname: seed_genera
      tooltip: "These genera will be included in search results regardless of similarity."
      formvalue: ''
      options-from-url:
        url: https://idbac.org/analysis-utils/get_genus_options
        value-key: "value-key"
        display-key: "display-key"

    - displayname: Seed Species
      paramtype: select # select_checkbox # <-- should be used when a dropdown is implemented
      nf_paramname: seed_species
      selecttype: multi
      tooltip: "These species will be included in search results regardless of similarity."
      formvalue: ''
      options-from-url:
        url: https://idbac.org/analysis-utils/get_species_options
        value-key: "value-key"
        display-key: "display-key"

    - displayname: MALDI Instrument
      paramtype: select
      nf_paramname: MALDI_instrument
      formvalue: general
      options-from-url:
        url: https://idbac.org/analysis-utils/get_instrument_options
        value-key: "value"
        display-key: "display"
      tooltip: "Selecting the appropriate instrument will optimize spectrum processing parameters, enabling more accurate IDs."